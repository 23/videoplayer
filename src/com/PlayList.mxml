<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="400" height="100" backgroundColor="black" creationComplete="createPlayList()">
	<mx:Script>
		<![CDATA[
			import mx.effects.Move;
			import com.philemonworks.PlayListItem;
			
			private var _items : Array;
			
			public function set itemArray(value : Array) : void
			{
				_items = value;
			}
			
            
			private function scrollBack() : void
			{
				if(playListBox.width > playListCanvas.width)
				{
					mover.end();
					mover.xTo = mover.target.x+100;
					if(mover.xTo > 0)
					{
						mover.xTo = 0;
						mover.play();
					}
					else
					{
						mover.play();
					}
				}
				
			}
			
			private function scrollForward() : void
			{
				if(playListBox.width > playListCanvas.width)
				{
					mover.end();
					mover.xTo = mover.target.x-100;
					if(mover.xTo < (playListCanvas.width - playListBox.width))
					{
						mover.xTo = playListCanvas.width - playListBox.width;
						mover.play();
					}
					else
					{
						mover.play();
					}
				}
				dispatchEvent(new PlayListEvent(-1));
			}
			
			private function createPlayList() : void
			{
				if(_items != null)
				{
					for(var i:Number = 0; i<_items.length; i++)
					{
						var playlistElement : PlayListItem = new PlayListItem();
						playlistElement.itemID = _items[i].itemID;
						playlistElement.movieName = _items[i].title;
						playlistElement.sourceURL = _items[i].photoSource;
						playlistElement.width = 100;
						playlistElement.height = 100;
						playlistElement.verticalScrollPolicy = "off";
						playlistElement.horizontalScrollPolicy = "off";
						playListBox.addChild(playlistElement);
						playlistElement.addEventListener(MouseEvent.CLICK , selectHandler);
					}
				}
			}
			
			private function selectHandler(evt:MouseEvent) : void
			{
				dispatchEvent(new PlayListEvent(evt.target.parent.itemID));
			}
			
		]]>
	</mx:Script>
	<mx:Move id="mover" target="{playListBox}"/>
	<mx:Image id="previousBtn" source="@Embed('assets/newSkin/previousBtn.gif')" click="{scrollBack()}" left="0" verticalCenter="0" />
	<mx:Canvas verticalCenter="0" verticalScrollPolicy="off" horizontalScrollPolicy="off" left="{previousBtn.width}" right="{nextBtn.width}" id="playListCanvas">
		<mx:HBox id="playListBox" verticalScrollPolicy="off" verticalCenter="0" />
	</mx:Canvas>
	<mx:Image id="nextBtn" source="@Embed('assets/newSkin/nextBtn.gif')" click="{scrollForward()}" right="0" verticalCenter="0" />
</mx:Canvas>
